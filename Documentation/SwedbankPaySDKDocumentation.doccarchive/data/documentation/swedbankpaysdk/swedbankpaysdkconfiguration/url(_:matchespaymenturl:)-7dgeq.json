{"primaryContentSections":[{"kind":"declarations","declarations":[{"tokens":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"url"},{"kind":"text","text":"("},{"kind":"externalParam","text":"_"},{"kind":"text","text":" "},{"kind":"internalParam","text":"url"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"URL","preciseIdentifier":"s:10Foundation3URLV"},{"kind":"text","text":", "},{"kind":"externalParam","text":"matchesPaymentUrl"},{"kind":"text","text":" "},{"kind":"internalParam","text":"paymentUrl"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"URL","preciseIdentifier":"s:10Foundation3URLV"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"}],"languages":["swift"],"platforms":["iOS"]}]},{"kind":"content","content":[{"anchor":"discussion","level":2,"type":"heading","text":"Discussion"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The default implementation from allows for the scheme to change,"},{"type":"text","text":" "},{"type":"text","text":"and for extra query parameters to be added to the paymentUrl."},{"type":"text","text":" "},{"type":"text","text":"I.e. if the paymentUrl is https:\/\/example.com\/?a=1,"},{"type":"text","text":" "},{"type":"text","text":"then all of the following match:"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"https:\/\/example.com\/?a=1"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"https:\/\/example.com\/?a=1&b=2"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"com.example.my.app:\/\/example.com\/?a=1"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"com.example.my.app:\/\/example.com\/?a=1&b=2"}]}]}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The need for this method merits some discussion."},{"type":"text","text":" "},{"type":"text","text":"When a 3D-Secure flow starts an external application, such as"},{"type":"text","text":" "},{"type":"text","text":"BankID, that application will in turn continue the flow by opening"},{"type":"text","text":" "},{"type":"text","text":"some url. Usually that url will be a url of the card issuer, and therefore"},{"type":"text","text":" "},{"type":"text","text":"not routed back to our app. Instead, it will be opened in Safari. Of course,"},{"type":"text","text":" "},{"type":"text","text":"ultimately that page will navigate to the paymentUrl of the payment order"},{"type":"text","text":" "},{"type":"text","text":"in progress. Assuming both your backend and your app are configured correctly,"},{"type":"text","text":" "},{"type":"text","text":"the paymentUrl should be a Universal Link to your app, and you should"},{"type":"text","text":" "},{"type":"text","text":"receive the url your"},{"type":"text","text":" "},{"type":"codeVoice","code":"UIApplicationDelegate.application(_:continue:restorationHandler:)"},{"type":"text","text":"."},{"type":"text","text":" "},{"type":"text","text":"You will then forward the url to the SDK by calling"},{"type":"text","text":" "},{"type":"codeVoice","code":"SwedbankPaySDK.continue(userActivity:)"},{"type":"text","text":". The url there is then equal"},{"type":"text","text":" "},{"type":"text","text":"to the payment order’s paymentUrl (which you reported to the SDK in the"},{"type":"text","text":" "},{"type":"codeVoice","code":"ViewPaymentOrderInfo"},{"type":"text","text":"), the SDK recognizes this, and the payment menu is reloaded."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"However, the mechanics of Universal Links make them unreliable. To work around"},{"type":"text","text":" "},{"type":"text","text":"their limitations, we must allow for alternate urls to also match the paymentUrl."},{"type":"text","text":" "},{"type":"text","text":"To see why, consider the following flow of events:"}]},{"type":"orderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The card issuer page navigates to "},{"type":"codeVoice","code":"paymentUrl"},{"type":"text","text":". This is our first opportunity;"},{"type":"text","text":" "},{"type":"text","text":"Here the url is equal to "},{"type":"codeVoice","code":"paymentUrl"},{"type":"text","text":"."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Assume "},{"type":"codeVoice","code":"paymentUrl"},{"type":"text","text":" is opened in Safari. We must show some html content to the user."},{"type":"text","text":" "},{"type":"text","text":"Show them a page with a “continue” button, which links back to the "},{"type":"codeVoice","code":"paymentUrl"},{"type":"text","text":","},{"type":"text","text":" "},{"type":"text","text":"but with an extra parameter (this is needed for the next step)."},{"type":"text","text":" "},{"type":"text","text":"This is our second opportunity; here the url is "},{"type":"codeVoice","code":"paymentUrl"},{"type":"text","text":" with an extra query"},{"type":"text","text":" "},{"type":"text","text":"parameter."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Assume the "},{"type":"codeVoice","code":"paymentUrl"},{"type":"text","text":" with extra parameter is "},{"type":"emphasis","inlineContent":[{"type":"text","text":"also"}]},{"type":"text","text":" opened in Safari."},{"type":"text","text":" "},{"type":"text","text":"(N.B! This should not happen with if all parts of your system are configured"},{"type":"text","text":" "},{"type":"text","text":"correctly, but in principle it is possible that iOS has not yet successfully"},{"type":"text","text":" "},{"type":"text","text":"retrieved your apple-app-site-association file. Also this scenario is prone to"},{"type":"text","text":" "},{"type":"text","text":"occuring during development, so it is nice not to get stuck here.) We show the same"},{"type":"text","text":" "},{"type":"text","text":"html content, except the “continue” button now links to "},{"type":"codeVoice","code":"paymentUrl"},{"type":"text","text":" with the scheme"},{"type":"text","text":" "},{"type":"text","text":"changed to a scheme unique to your app."}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"There is nowhere else for the custom-scheme link to go except your app, so"},{"type":"text","text":" "},{"type":"text","text":"here is our final possibility of getting the url. Now the url is "},{"type":"codeVoice","code":"paymentUrl"},{"type":"text","text":" "},{"type":"text","text":"but with a different scheme. (In our Merchant Backend example implementation,"},{"type":"text","text":" "},{"type":"text","text":"it is actually "},{"type":"codeVoice","code":"paymentUrl"},{"type":"text","text":" with both an extra query parameter and a different"},{"type":"text","text":" "},{"type":"text","text":"scheme, to simplify the implementation.) Note that in this case we get the url"},{"type":"text","text":" "},{"type":"text","text":"in our "},{"type":"codeVoice","code":"UIApplicationDelegate.application(_:open:options:)"},{"type":"text","text":" method instead."}]}]}]}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/swedbankpaysdk\/swedbankpaysdkconfiguration\/url(_:matchespaymenturl:)-7dgeq"],"traits":[{"interfaceLanguage":"swift"}]}],"defaultImplementationsSections":[{"title":"SwedbankPaySDKConfiguration Implementations","identifiers":["doc:\/\/com.swedbank.SwedbankPaySDK\/documentation\/SwedbankPaySDK\/SwedbankPaySDKConfiguration\/url(_:matchesPaymentUrl:)-93n1c"]},{"title":"SwedbankPaySDKConfigurationWithCallbackScheme Implementations","identifiers":["doc:\/\/com.swedbank.SwedbankPaySDK\/documentation\/SwedbankPaySDK\/SwedbankPaySDKConfigurationWithCallbackScheme\/url(_:matchesPaymentUrl:)"]}],"identifier":{"url":"doc:\/\/com.swedbank.SwedbankPaySDK\/documentation\/SwedbankPaySDK\/SwedbankPaySDKConfiguration\/url(_:matchesPaymentUrl:)-7dgeq","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Called by SwedbankPaySDKController when it needs to check if a given url"},{"type":"text","text":" "},{"type":"text","text":"is equivalent to a "},{"type":"codeVoice","code":"paymentUrl"},{"type":"text","text":" of a payment order."},{"type":"text","text":" "},{"type":"text","text":"This method has a default implementation. In advanced scenarios you"},{"type":"text","text":" "},{"type":"text","text":"may wish to provide your own implementation instead."}],"kind":"symbol","metadata":{"role":"symbol","title":"url(_:matchesPaymentUrl:)","roleHeading":"Instance Method","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"url"},{"kind":"text","text":"("},{"kind":"typeIdentifier","text":"URL","preciseIdentifier":"s:10Foundation3URLV"},{"kind":"text","text":", "},{"kind":"externalParam","text":"matchesPaymentUrl"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"URL","preciseIdentifier":"s:10Foundation3URLV"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"}],"symbolKind":"method","externalID":"s:14SwedbankPaySDK0aB16SDKConfigurationP3url_17matchesPaymentUrlSb10Foundation3URLV_AHtF","required":true,"modules":[{"name":"SwedbankPaySDK"}]},"hierarchy":{"paths":[["doc:\/\/com.swedbank.SwedbankPaySDK\/documentation\/SwedbankPaySDK","doc:\/\/com.swedbank.SwedbankPaySDK\/documentation\/SwedbankPaySDK\/SwedbankPaySDKConfiguration"]]},"references":{"doc://com.swedbank.SwedbankPaySDK/documentation/SwedbankPaySDK/SwedbankPaySDKConfigurationWithCallbackScheme/url(_:matchesPaymentUrl:)":{"role":"symbol","title":"url(_:matchesPaymentUrl:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"url"},{"kind":"text","text":"("},{"kind":"typeIdentifier","text":"URL","preciseIdentifier":"s:10Foundation3URLV"},{"kind":"text","text":", "},{"kind":"externalParam","text":"matchesPaymentUrl"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"URL","preciseIdentifier":"s:10Foundation3URLV"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"}],"abstract":[{"type":"text","text":"Called by SwedbankPaySDKController when it needs to check if a given url"},{"type":"text","text":" "},{"type":"text","text":"is equivalent to a "},{"type":"codeVoice","code":"paymentUrl"},{"type":"text","text":" of a payment order."},{"type":"text","text":" "},{"type":"text","text":"This method has a default implementation. In advanced scenarios you"},{"type":"text","text":" "},{"type":"text","text":"may wish to provide your own implementation instead."}],"identifier":"doc:\/\/com.swedbank.SwedbankPaySDK\/documentation\/SwedbankPaySDK\/SwedbankPaySDKConfigurationWithCallbackScheme\/url(_:matchesPaymentUrl:)","kind":"symbol","type":"topic","url":"\/documentation\/swedbankpaysdk\/swedbankpaysdkconfigurationwithcallbackscheme\/url(_:matchespaymenturl:)"},"doc://com.swedbank.SwedbankPaySDK/documentation/SwedbankPaySDK/SwedbankPaySDKConfiguration":{"role":"symbol","title":"SwedbankPaySDKConfiguration","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"SwedbankPaySDKConfiguration"}],"abstract":[{"type":"text","text":"A SwedbankPaySDKConfiguration is responsible for"},{"type":"text","text":" "},{"type":"text","text":"creating and manipulating Consumer Identification Sessions"},{"type":"text","text":" "},{"type":"text","text":"and Payment Orders as required by the SwedbankPaySDKController."}],"identifier":"doc:\/\/com.swedbank.SwedbankPaySDK\/documentation\/SwedbankPaySDK\/SwedbankPaySDKConfiguration","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"SwedbankPaySDKConfiguration"}],"url":"\/documentation\/swedbankpaysdk\/swedbankpaysdkconfiguration"},"doc://com.swedbank.SwedbankPaySDK/documentation/SwedbankPaySDK":{"role":"collection","title":"SwedbankPaySDK","abstract":[],"identifier":"doc:\/\/com.swedbank.SwedbankPaySDK\/documentation\/SwedbankPaySDK","kind":"symbol","type":"topic","url":"\/documentation\/swedbankpaysdk"},"doc://com.swedbank.SwedbankPaySDK/documentation/SwedbankPaySDK/SwedbankPaySDKConfiguration/url(_:matchesPaymentUrl:)-7dgeq":{"defaultImplementations":2,"role":"symbol","title":"url(_:matchesPaymentUrl:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"url"},{"kind":"text","text":"("},{"kind":"typeIdentifier","text":"URL","preciseIdentifier":"s:10Foundation3URLV"},{"kind":"text","text":", "},{"kind":"externalParam","text":"matchesPaymentUrl"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"URL","preciseIdentifier":"s:10Foundation3URLV"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"}],"abstract":[{"type":"text","text":"Called by SwedbankPaySDKController when it needs to check if a given url"},{"type":"text","text":" "},{"type":"text","text":"is equivalent to a "},{"type":"codeVoice","code":"paymentUrl"},{"type":"text","text":" of a payment order."},{"type":"text","text":" "},{"type":"text","text":"This method has a default implementation. In advanced scenarios you"},{"type":"text","text":" "},{"type":"text","text":"may wish to provide your own implementation instead."}],"identifier":"doc:\/\/com.swedbank.SwedbankPaySDK\/documentation\/SwedbankPaySDK\/SwedbankPaySDKConfiguration\/url(_:matchesPaymentUrl:)-7dgeq","kind":"symbol","required":true,"type":"topic","url":"\/documentation\/swedbankpaysdk\/swedbankpaysdkconfiguration\/url(_:matchespaymenturl:)-7dgeq"},"doc://com.swedbank.SwedbankPaySDK/documentation/SwedbankPaySDK/SwedbankPaySDKConfiguration/url(_:matchesPaymentUrl:)-93n1c":{"role":"symbol","title":"url(_:matchesPaymentUrl:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"url"},{"kind":"text","text":"("},{"kind":"typeIdentifier","text":"URL","preciseIdentifier":"s:10Foundation3URLV"},{"kind":"text","text":", "},{"kind":"externalParam","text":"matchesPaymentUrl"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"URL","preciseIdentifier":"s:10Foundation3URLV"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","text":"Bool","preciseIdentifier":"s:Sb"}],"abstract":[{"type":"text","text":"Called by SwedbankPaySDKController when it needs to check if a given url"},{"type":"text","text":" "},{"type":"text","text":"is equivalent to a "},{"type":"codeVoice","code":"paymentUrl"},{"type":"text","text":" of a payment order."},{"type":"text","text":" "},{"type":"text","text":"This method has a default implementation. In advanced scenarios you"},{"type":"text","text":" "},{"type":"text","text":"may wish to provide your own implementation instead."}],"identifier":"doc:\/\/com.swedbank.SwedbankPaySDK\/documentation\/SwedbankPaySDK\/SwedbankPaySDKConfiguration\/url(_:matchesPaymentUrl:)-93n1c","kind":"symbol","type":"topic","url":"\/documentation\/swedbankpaysdk\/swedbankpaysdkconfiguration\/url(_:matchespaymenturl:)-93n1c"}}}